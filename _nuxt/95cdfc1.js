(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{632:function(e,t,n){var content=n(637);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(59).default)("6129112a",content,!0,{sourceMap:!1})},634:function(e,t,n){n(635)},635:function(e,t,n){"use strict";var r=n(8),o=n(32),c=n(133),l=n(134),f=n(308),h=n(11),d=n(54),v=h("replace"),x=RegExp.prototype,k=Math.max,w=function(e,t,n){return n>e.length?-1:""===t?n:e.indexOf(t,n)};r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,h,y,T,m,j,O,A=o(this),R=0,E=0,P="";if(null!=e){if((n=c(e))&&!~String(o("flags"in x?e.flags:l.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(r=e[v]))return r.call(e,A,t);if(d&&n)return String(A).replace(e,t)}for(h=String(A),y=String(e),(T="function"==typeof t)||(t=String(t)),m=y.length,j=k(1,m),R=w(h,y,0);-1!==R;)O=T?String(t(y,R,h)):f(y,h,R,[],void 0,t),P+=h.slice(E,R)+O,E=R+m,R=w(h,y,R+j);return E<h.length&&(P+=h.slice(E)),P}})},636:function(e,t,n){"use strict";n(632)},637:function(e,t,n){var r=n(58)((function(i){return i[1]}));r.push([e.i,"textarea[data-v-5311bda0]{\n  height:40px\n}",""]),r.locals={},e.exports=r},641:function(e,t,n){"use strict";n.r(t);n(70);var r=n(23),o=n(36),c=n(34),l=n(35),f=n(19),h=n(13),d=(n(27),n(91),n(311),n(634),n(309),n(47),n(64),n(192),n(73),n(16));n(41),n(71),n(30),n(131);function v(e,t,n){var i,r,o;void 0===t&&(t=50),void 0===n&&(n={});var a=null!=(i=n.isImmediate)&&i,u=null!=(r=n.callback)&&r,c=n.maxWait,l=Date.now(),f=[];function h(){if(void 0!==c){var e=Date.now()-l;if(e+t>=c)return c-e}return t}var d=function(){var t=[].slice.call(arguments),n=this;return new Promise((function(i,r){var c=a&&void 0===o;if(void 0!==o&&clearTimeout(o),o=setTimeout((function(){if(o=void 0,l=Date.now(),!a){var i=e.apply(n,t);u&&u(i),f.forEach((function(e){return(0,e.resolve)(i)})),f=[]}}),h()),c){var d=e.apply(n,t);return u&&u(d),i(d)}f.push({resolve:i,reject:r})}))};return d.cancel=function(e){void 0!==o&&clearTimeout(o),f.forEach((function(t){return(0,t.reject)(e)})),f=[]},d}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var k=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},w=function(e){Object(c.a)(n,e);var t=x(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).doneTask=e.task,e.saveTaskDebounce=v((function(){return e.saveTask()}),100),e}return Object(o.a)(n,[{key:"taskTextarea",get:function(){return this.$refs["task-textarea"]}},{key:"isFillTheGapsExercise",get:function(){return this.exercise.exerciseText.startsWith("Вставьте")||this.exercise.exerciseText.startsWith("Заполните")||this.exercise.exerciseText.startsWith("Раскройте скобки")}},{key:"doneTaskIsCorrect",get:function(){var e=this.doneTask.trim(),t=this.fullAnswer.replaceAll("<b>","").replaceAll("</b>","");return e.endsWith(".")&&!t.endsWith(".")&&(t+="."),!this.doneTask.endsWith(".")&&t.endsWith(".")&&(e+="."),e===t}},{key:"fullAnswer",get:function(){var e,t;return this.isFillTheGapsExercise?(e=function(e,t){if(e.split("").filter((function(e){return"_"===e})).length!==t.length)throw"Кол-во _ в {replacable} (".concat(e,") != длине массива {arr} (").concat(t,")");var n="";return e.split("_").forEach((function(e,r){var o;return n+=e+(null!==(o=t[r])&&void 0!==o?o:"")})),n}(this.task,this.answer.split(",").map((function(a){return a.trim()})).map((function(a){return"<b>".concat(a,"</b>")})))).startsWith("<b>")&&(e="<b>".concat((t=e.slice("<b>".length)).charAt(0).toUpperCase()+t.substr(1))):e=this.answer,e=e.trim()}},{key:"mounted",value:function(){var e;this.taskTextarea.addEventListener("input",(function(){this.style.height="15px",this.style.height=(this.scrollHeight||40)+"px"})),this.showAnswer||this.taskTextarea.dispatchEvent(new Event("input")),this.doneTask=null!==(e=this.exerciseProgressRepo.tryGetTask(this.exercise.exerciseNumber,this.$vnode.key))&&void 0!==e?e:this.task}},{key:"onShowAnswer",value:function(){this.showAnswer||(this.taskTextarea.dispatchEvent(new Event("input")),this.doneTask=this.task)}},{key:"onDoneTaskChange",value:function(){this.saveTaskDebounce()}},{key:"saveTask",value:function(){this.exerciseProgressRepo.save(this.exercise.exerciseNumber,this.$vnode.key,this.doneTask)}}]),n}(d.Vue);k([Object(d.Prop)()],w.prototype,"exercise",void 0),k([Object(d.Prop)()],w.prototype,"task",void 0),k([Object(d.Prop)()],w.prototype,"answer",void 0),k([Object(d.InjectReactive)()],w.prototype,"exerciseProgressRepo",void 0),k([Object(d.Prop)({default:!1})],w.prototype,"showAnswer",void 0),k([Object(d.Watch)("showAnswer")],w.prototype,"onShowAnswer",null),k([Object(d.Watch)("doneTask")],w.prototype,"onDoneTaskChange",null);var y=w=k([Object(d.Component)({})],w),T=(n(636),n(18)),component=Object(T.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"border rounded bg-white p-2 mb-2"},[n("div",{staticClass:"flex space-x-2"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.doneTask,expression:"doneTask"}],ref:"task-textarea",staticClass:"w-4/5 flex-grow",domProps:{value:e.doneTask},on:{input:function(t){t.target.composing||(e.doneTask=t.target.value)}}})]),e._v(" "),e.showAnswer?n("div",{class:[e.doneTaskIsCorrect?"text-green-400":"text-red-400"],domProps:{innerHTML:e._s(e.fullAnswer)}}):e._e()])}),[],!1,null,"5311bda0",null);t.default=component.exports}}]);