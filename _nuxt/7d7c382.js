(window.webpackJsonp=window.webpackJsonp||[]).push([[15,29],{632:function(e,t,r){var content=r(637);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(59).default)("6129112a",content,!0,{sourceMap:!1})},634:function(e,t,r){r(635)},635:function(e,t,r){"use strict";var n=r(8),o=r(32),c=r(133),l=r(134),f=r(308),h=r(11),d=r(54),v=h("replace"),x=RegExp.prototype,y=Math.max,k=function(e,t,r){return r>e.length?-1:""===t?r:e.indexOf(t,r)};n({target:"String",proto:!0},{replaceAll:function(e,t){var r,n,h,O,w,j,_,m,T=o(this),E=0,P=0,S="";if(null!=e){if((r=c(e))&&!~String(o("flags"in x?e.flags:l.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(n=e[v]))return n.call(e,T,t);if(d&&r)return String(T).replace(e,t)}for(h=String(T),O=String(e),(w="function"==typeof t)||(t=String(t)),j=O.length,_=y(1,j),E=k(h,O,0);-1!==E;)m=w?String(t(O,E,h)):f(O,h,E,[],void 0,t),S+=h.slice(P,E)+m,P=E+j,E=k(h,O,E+_);return P<h.length&&(S+=h.slice(P)),S}})},636:function(e,t,r){"use strict";r(632)},637:function(e,t,r){var n=r(58)((function(i){return i[1]}));n.push([e.i,"textarea[data-v-5311bda0]{\n  height:40px\n}",""]),n.locals={},e.exports=n},641:function(e,t,r){"use strict";r.r(t);r(70);var n=r(23),o=r(36),c=r(34),l=r(35),f=r(19),h=r(13),d=(r(27),r(91),r(311),r(634),r(309),r(47),r(64),r(192),r(73),r(16));r(41),r(71),r(30),r(131);function v(e,t,r){var i,n,o;void 0===t&&(t=50),void 0===r&&(r={});var a=null!=(i=r.isImmediate)&&i,u=null!=(n=r.callback)&&n,c=r.maxWait,l=Date.now(),f=[];function h(){if(void 0!==c){var e=Date.now()-l;if(e+t>=c)return c-e}return t}var d=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(i,n){var c=a&&void 0===o;if(void 0!==o&&clearTimeout(o),o=setTimeout((function(){if(o=void 0,l=Date.now(),!a){var i=e.apply(r,t);u&&u(i),f.forEach((function(e){return(0,e.resolve)(i)})),f=[]}}),h()),c){var d=e.apply(r,t);return u&&u(d),i(d)}f.push({resolve:i,reject:n})}))};return d.cancel=function(e){void 0!==o&&clearTimeout(o),f.forEach((function(t){return(0,t.reject)(e)})),f=[]},d}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var y=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},k=function(e){Object(c.a)(r,e);var t=x(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).doneTask=e.task,e.saveTaskDebounce=v((function(){return e.saveTask()}),100),e}return Object(o.a)(r,[{key:"taskTextarea",get:function(){return this.$refs["task-textarea"]}},{key:"isFillTheGapsExercise",get:function(){return this.exercise.exerciseText.startsWith("Вставьте")||this.exercise.exerciseText.startsWith("Заполните")||this.exercise.exerciseText.startsWith("Раскройте скобки")}},{key:"doneTaskIsCorrect",get:function(){var e=this.doneTask.trim(),t=this.fullAnswer.replaceAll("<b>","").replaceAll("</b>","");return e.endsWith(".")&&!t.endsWith(".")&&(t+="."),!this.doneTask.endsWith(".")&&t.endsWith(".")&&(e+="."),e===t}},{key:"fullAnswer",get:function(){var e,t;return this.isFillTheGapsExercise?(e=function(e,t){if(e.split("").filter((function(e){return"_"===e})).length!==t.length)throw"Кол-во _ в {replacable} (".concat(e,") != длине массива {arr} (").concat(t,")");var r="";return e.split("_").forEach((function(e,n){var o;return r+=e+(null!==(o=t[n])&&void 0!==o?o:"")})),r}(this.task,this.answer.split(",").map((function(a){return a.trim()})).map((function(a){return"<b>".concat(a,"</b>")})))).startsWith("<b>")&&(e="<b>".concat((t=e.slice("<b>".length)).charAt(0).toUpperCase()+t.substr(1))):e=this.answer,e=e.trim()}},{key:"mounted",value:function(){var e;this.taskTextarea.addEventListener("input",(function(){this.style.height="15px",this.style.height=(this.scrollHeight||40)+"px"})),this.showAnswer||this.taskTextarea.dispatchEvent(new Event("input")),this.doneTask=null!==(e=this.exerciseProgressRepo.tryGetTask(this.exercise.exerciseNumber,this.$vnode.key))&&void 0!==e?e:this.task}},{key:"onShowAnswer",value:function(){this.showAnswer||(this.taskTextarea.dispatchEvent(new Event("input")),this.doneTask=this.task)}},{key:"onDoneTaskChange",value:function(){this.saveTaskDebounce()}},{key:"saveTask",value:function(){this.exerciseProgressRepo.save(this.exercise.exerciseNumber,this.$vnode.key,this.doneTask)}}]),r}(d.Vue);y([Object(d.Prop)()],k.prototype,"exercise",void 0),y([Object(d.Prop)()],k.prototype,"task",void 0),y([Object(d.Prop)()],k.prototype,"answer",void 0),y([Object(d.InjectReactive)()],k.prototype,"exerciseProgressRepo",void 0),y([Object(d.Prop)({default:!1})],k.prototype,"showAnswer",void 0),y([Object(d.Watch)("showAnswer")],k.prototype,"onShowAnswer",null),y([Object(d.Watch)("doneTask")],k.prototype,"onDoneTaskChange",null);var O=k=y([Object(d.Component)({})],k),w=(r(636),r(18)),component=Object(w.a)(O,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"border rounded bg-white p-2 mb-2"},[r("div",{staticClass:"flex space-x-2"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.doneTask,expression:"doneTask"}],ref:"task-textarea",staticClass:"w-4/5 flex-grow",domProps:{value:e.doneTask},on:{input:function(t){t.target.composing||(e.doneTask=t.target.value)}}})]),e._v(" "),e.showAnswer?r("div",{class:[e.doneTaskIsCorrect?"text-green-400":"text-red-400"],domProps:{innerHTML:e._s(e.fullAnswer)}}):e._e()])}),[],!1,null,"5311bda0",null);t.default=component.exports},652:function(e,t,r){"use strict";r.r(t);r(70);var n=r(23),o=r(36),c=r(34),l=r(35),f=r(19),h=r(13),d=(r(27),r(24),r(109),r(16)),v=r(21),x=r(88);r(71),r(41),r(72),r(90),r(42),r(31),r(30),r(53);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(v.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var O=function(){function e(t){Object(n.a)(this,e),this._localStorage=t,this._doneExercisesKey="doneExercises"}return Object(o.a)(e,[{key:"doExercise",value:function(e){this._localStorage.setItem(this._doneExercisesKey,JSON.stringify([].concat(Object(x.a)(this._getDoneExercises()),[e])))}},{key:"undoExercise",value:function(e){this._localStorage.setItem(this._doneExercisesKey,JSON.stringify(Object(x.a)(this._getDoneExercises().filter((function(t){return t!==e})))))}},{key:"isExerciseDone",value:function(e){return this._getDoneExercises().includes(e)}},{key:"_getDoneExercises",value:function(){var e;return JSON.parse(null!==(e=this._localStorage.getItem(this._doneExercisesKey))&&void 0!==e?e:"[]")}}]),e}(),w=function(){function e(t){Object(n.a)(this,e),this._localStorage=t,this._keyPrefix="exercise_"}return Object(o.a)(e,[{key:"_buildKey",value:function(e){return"".concat(this._keyPrefix).concat(e)}},{key:"save",value:function(e,t,r){this._localStorage.setItem(this._buildKey(e),JSON.stringify(k(k({},this._tryGetTasks(e)),{},Object(v.a)({},t,r))))}},{key:"reset",value:function(e){this._localStorage.removeItem(this._buildKey(e))}},{key:"tryGetTask",value:function(e,t){return this._tryGetTasks(e)[t]}},{key:"_tryGetTasks",value:function(e){var t;return JSON.parse(null!==(t=this._localStorage.getItem(this._buildKey(e)))&&void 0!==t?t:"{}")}}]),e}();function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var _=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},m=function(e){Object(c.a)(r,e);var t=j(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).opened=!0,e}return Object(o.a)(r,[{key:"created",value:function(){if(Object(h.a)(this.ex.tasks[0])!==Object(h.a)(this.answer.tasks[0]))throw"Беда в упражнении № ".concat(this.ex.exerciseNumber,": структура упражнения не совпадает со структурой ответа");if(this.ex.tasks.length!==this.answer.tasks.length)throw"Беда в упражнении № ".concat(this.ex.exerciseNumber,": кол-во упражнений != кол-во ответов")}},{key:"toggleExercise",value:function(e){document.getElementById(e.toString()).scrollIntoView(),this.ex.done?(this.exerciseProgressRepo.reset(e),this.ex.done=!1,this.doneExerciseRepo.undoExercise(e)):(this.ex.done=!0,this.doneExerciseRepo.doExercise(e))}},{key:"mounted",value:function(){this.exerciseProgressRepo=new w(localStorage),this.doneExerciseRepo=new O(localStorage),this.ex.done=this.doneExerciseRepo.isExerciseDone(this.ex.exerciseNumber),this.opened=!this.ex.done}}]),r}(d.Vue);_([Object(d.Prop)()],m.prototype,"ex",void 0),_([Object(d.Prop)()],m.prototype,"answer",void 0),_([Object(d.ProvideReactive)()],m.prototype,"exerciseProgressRepo",void 0);var T=m=_([Object(d.Component)({})],m),E=r(18),component=Object(E.a)(T,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.ex.rules?r("div",{staticClass:"italic whitespace-pre-line"},[e._v(e._s(e.ex.rules))]):e._e(),e._v(" "),r("details",{attrs:{open:e.opened}},[r("summary",[r("h3",{class:["inline-block",e.ex.done?"line-through":""],attrs:{id:e.ex.exerciseNumber}},[e._v("\n            Упражнение "+e._s(e.ex.exerciseNumber)+"\n          ")])]),e._v(" "),r("div",[r("div",{staticClass:"py-1 italic"},[e._v(e._s(e.ex.exerciseText))]),e._v(" "),e._l(e.ex.tasks,(function(t,n){return["object"==typeof t?[r("div",{staticClass:"py-1 italic"},[e._v(e._s(n+1+". "+(t.exerciseText||"")))]),e._v(" "),e._l(t.tasks,(function(t,o){return["object"==typeof t?[r("div",{staticClass:"py-1 italic"},[e._v(e._s("abcdef"[o]+") "+(t.exerciseText||"")))]),e._v(" "),e._l(t.tasks,(function(t,c){return[r("task-item",{key:n.toString()+o.toString()+c.toString(),attrs:{task:t,answer:e.answer.tasks[n].tasks[o].tasks[c],exercise:e.ex,"show-answer":e.ex.done}})]}))]:[r("task-item",{key:n.toString()+o.toString(),attrs:{task:t,answer:e.answer.tasks[n].tasks[o],exercise:e.ex,"show-answer":e.ex.done}})]]}))]:[r("task-item",{key:n,attrs:{task:t,answer:e.answer.tasks[n],exercise:e.ex,"show-answer":e.ex.done}})]]}))],2)]),e._v(" "),r("div",{staticClass:"flex justify-center"},[r("button",{staticClass:"w-full py-3",on:{click:function(t){return e.toggleExercise(e.ex.exerciseNumber)}}},[e.ex.done?r("span",[e._v("Заново 🔁")]):r("span",[e._v("Проверить ✔️")])])])])}),[],!1,null,"0f195089",null);t.default=component.exports;installComponents(component,{TaskItem:r(641).default})}}]);