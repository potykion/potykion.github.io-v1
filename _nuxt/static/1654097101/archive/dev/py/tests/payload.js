__NUXT_JSONP__("/archive/dev/py/tests", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac){return {data:[{page:{slug:"tests",description:"Как писать тесты на Python и почему моки - это важно",title:"Python \u002F Тесты",toc:[{id:F,depth:3,text:G}],body:{type:"root",children:[{type:b,tag:q,props:{},children:[{type:a,value:"Все просто:"}]},{type:a,value:j},{type:b,tag:"ul",props:{},children:[{type:a,value:j},{type:b,tag:H,props:{},children:[{type:a,value:"ставим "},{type:b,tag:x,props:{href:"https:\u002F\u002Fdocs.pytest.org\u002Fen\u002Fstable\u002F",rel:[A,B,C],target:D},children:[{type:a,value:"pytest"}]}]},{type:a,value:j},{type:b,tag:H,props:{},children:[{type:a,value:"юзаем "},{type:b,tag:x,props:{href:"https:\u002F\u002Fdocs.python.org\u002F3\u002Flibrary\u002Funittest.mock.html#unittest.mock.Mock",rel:[A,B,C],target:D},children:[{type:a,value:"моки"}]},{type:a,value:" из стандартной библиотеки\n(или "},{type:b,tag:x,props:{href:"https:\u002F\u002Fdocs.python.org\u002F3\u002Flibrary\u002Funittest.mock.html#unittest.mock.AsyncMock",rel:[A,B,C],target:D},children:[{type:a,value:"асинхронный мок"}]},{type:a,value:", доступный с\nверсии питона 3.8)"}]},{type:a,value:j}]},{type:a,value:j},{type:b,tag:"h3",props:{id:F},children:[{type:b,tag:x,props:{href:"#%D0%BC%D0%BE%D0%BA%D0%B8",ariaHidden:"true",tabIndex:-1},children:[{type:b,tag:c,props:{className:["icon","icon-link"]},children:[]}]},{type:a,value:G}]},{type:a,value:j},{type:b,tag:q,props:{},children:[{type:a,value:"Зачем нужны моки? Чтобы не обращаться на прямую к бд, интернету, другим сервисам во время выполнения тестов:"}]},{type:a,value:j},{type:b,tag:I,props:{className:[J]},children:[{type:b,tag:K,props:{className:[L,M]},children:[{type:b,tag:o,props:{},children:[{type:b,tag:c,props:{className:[d,"decorator","annotation",e]},children:[{type:a,value:"@pytest"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:"mark"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:"asyncio"}]},{type:a,value:j},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:N}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:O}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"test_parse_lamoda_clothing"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"\n  read_from_test_data"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" ReadFromTestDataFunc"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n  clothing_with_color"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" Clothing\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,"triple-quoted-string",n]},children:[{type:a,value:"\"\"\"\n  Arrange: Функция парса ламода-шмотки с моками\n  Act: Вызываем парс\n  Assert: Распаршенная шмотка = ожидаемой\n  \"\"\""}]},{type:a,value:"\n  parse "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" ParseLamodaClothing"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"\n    get_html"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:"HTML"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"html"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:U},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"lamoda.html\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:s},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    get_binary"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:U},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"\n        "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"HE002EMKLGV2_11830316_1_v1.jpg\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:" binary"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:" only_file"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:V}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:s},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"\n  \n  actual_clothing "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:W}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:s},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"https:\u002F\u002Fwww.lamoda.ru\u002Fp\u002Fhe002emklgv2\u002Fclothes-hebymango-futbolka\u002F\""}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"\n  \n  "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"assert"}]},{type:a,value:" actual_clothing "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"=="}]},{type:a,value:" clothing_with_color\n"}]}]}]},{type:a,value:j},{type:b,tag:q,props:{},children:[{type:a,value:"Здесь представлен класс, который по ссылке на ламода-шмотку отдает типизированную инфу о ней."},{type:b,tag:Y,props:{},children:[]},{type:a,value:"\nПо ссылке получаем html-содержимое, затем достаем из html картинки и загружаем их."},{type:b,tag:Y,props:{},children:[]},{type:a,value:"\nС помощью моков, реальных запросов на скачивание html и картинок не производится и тесты выполняются быстро."}]},{type:a,value:j},{type:b,tag:q,props:{},children:[{type:a,value:"Для моканья определенных методов класса, передаем словарик:"}]},{type:a,value:j},{type:b,tag:I,props:{className:[J]},children:[{type:b,tag:K,props:{className:[L,M]},children:[{type:b,tag:o,props:{},children:[{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:N}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:O}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"test_config_parse"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"\n  open_json"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" OpenJsonFunction"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n  mock_container"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" AppContainer\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"with"}]},{type:a,value:" override_container_with_objects"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"\n    mock_container"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    namespace_config_repo"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"update_or_insert_many_by_external_id.side_effect\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" fake_insert_many"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:a,value:s},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    venue_repo"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    payment_type_repo"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"get_all.return_value\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"["}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"]"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    legal_repo"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:r},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:w},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\n    parse"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" ParseLegacyConfig "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" mock_container"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:"parse_legacy_config"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"\n    legacy_config "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:" LegacyConfig"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:E},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:t}]},{type:a,value:_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,$]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"config\u002Ftashiriiko.json\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:s},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"\n\n    config"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" NamespaceConfig "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:W}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"legacy_config"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"\n\n    assert_entities_equal"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"\n    config"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    NamespaceConfig"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:t}]},{type:a,value:_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,$]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"config\u002Fparsed_tashiriiko.json\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:s},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:j}]}]}]},{type:a,value:j},{type:b,tag:q,props:{},children:[{type:a,value:"Здесь "},{type:b,tag:o,props:{},children:[{type:a,value:"side_effect"}]},{type:a,value:" обозначает, что при вызове "},{type:b,tag:o,props:{},children:[{type:a,value:"update_or_insert_many_by_external_id"}]},{type:a,value:"\nбудет вызван метод "},{type:b,tag:o,props:{},children:[{type:a,value:"fake_insert_many"}]},{type:a,value:y}]},{type:a,value:j},{type:b,tag:q,props:{},children:[{type:a,value:"А "},{type:b,tag:o,props:{},children:[{type:a,value:"return_value"}]},{type:a,value:" обозначает, что вызов метода "},{type:b,tag:o,props:{},children:[{type:a,value:"venue_repo.get_legacy_id_map"}]},{type:a,value:" вернет "},{type:b,tag:o,props:{},children:[{type:a,value:"{}"}]}]}]},dir:"\u002Farchive\u002Fdev\u002Fpy",path:"\u002Farchive\u002Fdev\u002Fpy\u002Ftests",extension:".md",createdAt:ac,updatedAt:ac}}],fetch:{},mutations:[]}}("text","element","span","token","punctuation","operator","(",")","=","\n",","," ",":","string","code","keyword","p","AsyncMock","\n    ","**","{","}","\n  ","a",".","boolean","nofollow","noopener","noreferrer","_blank","\n      ","moki","Моки","li","div","nuxt-content-highlight","pre","language-python","line-numbers","async","def","function","-","\u003E","None","\n      return_value","read_from_test_data","True","await"," parse","br","\"get_legacy_id_map.return_value\"","cast","builtin","dict"," open_json","2022-06-01T15:22:47.338Z")));